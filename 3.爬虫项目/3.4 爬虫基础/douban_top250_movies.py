import requests
from lxml import etree

s = requests.Session()

for id in range(0, 251, 25):
    url = 'https://movie.douban.com/top250/?start-' + str(id)
    r = s.get(url)
    r.encoding = 'utf-8'
    root = etree.HTML(r.content)
    items = root.xpath('//ol/li/div[@class="item"]')
    for item in items:
        title = item.xpath('./div[@class="info"]//a/span[@class="title"]/text()')
        name = title[0].encode('gb2312', 'ignore').decode('gb2312')
        rating = item.xpath('.//div[@class="bd"]//span[@class="rating_num"]/text()')[0]
        print(name, rating)

'''
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
    肖申克的救赎 9.6
    霸王别姬 9.5
    这个杀手不太冷 9.4
    阿甘正传 9.4
    美丽人生 9.5
    泰坦尼克号 9.3
    千与千寻 9.3
    辛德勒的名单 9.4
    盗梦空间 9.3
    机器人总动员 9.3
    忠犬八公的故事 9.3
    三傻大闹宝莱坞 9.2
    海上钢琴师 9.2
    放牛班的春天 9.2
    大话西游之大圣娶亲 9.2
    楚门的世界 9.1
    教父 9.2
    龙猫 9.1
    星际穿越 9.2
    熔炉 9.2
    无间道 9.1
    触不可及 9.2
    乱世佳人 9.2
    当幸福来敲门 9.0
    怦然心动 8.9
'''